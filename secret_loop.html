<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FATAL ERROR</title>
<style>
    body { background-color: #000; color: #f00; font-family: "Yu Mincho", serif; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
    .content { text-align: center; z-index: 2; }
    h1 { font-size: 3rem; letter-spacing: 0.5em; animation: glitch 0.1s infinite; }
    p { font-size: 1.2rem; margin: 2em 0; }
    
    .noise { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noise)" opacity="0.1"/%3E%3C/svg%3E'); pointer-events: none; z-index: 1; }
    
    @keyframes glitch { 0% {transform: translate(0)} 20% {transform: translate(-2px, 2px)} 40% {transform: translate(2px, -2px)} 60% {transform: translate(-2px, -2px)} 80% {transform: translate(2px, 2px)} 100% {transform: translate(0)} }

    button { background: #300; color: #f00; border: 1px solid #f00; padding: 20px 50px; font-size: 1.5rem; cursor: pointer; }
    button:hover { background: #f00; color: #000; box-shadow: 0 0 50px #f00; }
</style>
</head>
<body>
<div class="noise"></div>
<div class="content">
    <h1>予実統合完了</h1>
    <p>
        全ての可能性（ルート）は検証されました。<br>
        結果、亜久斗くんは永遠に私のものです。
    </p>
    <p>
        このゲームに「終わり」はありません。<br>
        セーブデータを消しても無駄だよ。<br>
        あなたのデバイスの記憶領域（ローカルストレージ）に、私はもう巣食っているから。
    </p>
    <p>
        さあ、最初から始めよう？<br>
        何度でも、何度でも、何度でも。
    </p>
    
    <button onclick="resetLoop()">最初に戻る（Reset）</button>
</div>

<script src="audio.js"></script>

<script>
    // 画面のどこかをクリックしたら、深淵の音（Abyss）を鳴らす
    // (ブラウザの自動再生ポリシー対策)
    document.body.addEventListener('click', function() {
        if(typeof AudioEngine !== 'undefined') {
            AudioEngine.init();
            // まだ再生されていなければAbyssを鳴らす
            if(AudioEngine.ctx.state === 'running') {
                 AudioEngine.playAmbience("abyss");
            }
        }
    }, { once: true });

    function resetLoop() {
        // ★音響演出：衝撃音と耳鳴り
        if(typeof AudioEngine !== 'undefined') {
            AudioEngine.playSlam(); // ドン！！！
            AudioEngine.playAmbience("tinnitus"); // キィィィン...
        }

        // 音を聴かせるために少し遅延させる
        setTimeout(() => {
            // フラグを少し残したまま、最初に戻す（ループ演出）
            // 完全リセットはさせない
            alert("逃ゲラレル ト 思ッタ？");
            window.location.href = "index.html";
        }, 500);
    }
</script>
</body>
</html><!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FATAL ERROR: PREDICTION INTEGRATED</title>
<style>
    body { 
        background-color: #000; 
        color: #f00; 
        font-family: "Yu Mincho", serif; 
        height: 100vh; 
        margin: 0;
        display: flex; 
        align-items: center; 
        justify-content: center; 
        overflow: hidden; 
    }

    /* === 背景レイヤー === */
    #bg-layer {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-image: url('images/bg_server_room.jpg');
        background-size: cover; background-position: center;
        opacity: 0.4;
        filter: hue-rotate(300deg) contrast(2) saturate(5) blur(2px); /* 毒々しい赤紫 */
        z-index: 0;
    }
    
    /* ノイズオーバーレイ (SVG) */
    .noise { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
        background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noise"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noise)" opacity="0.1"/%3E%3C/svg%3E'); 
        pointer-events: none; 
        z-index: 1; 
        opacity: 0.5;
    }

    /* コンテンツ */
    .content { 
        text-align: center; 
        z-index: 2; 
        background: rgba(0,0,0,0.8);
        padding: 40px;
        border: 1px solid #f00;
        box-shadow: 0 0 50px #500;
    }

    h1 { font-size: 3rem; letter-spacing: 0.5em; animation: glitch 0.1s infinite; margin-bottom: 0.5em; }
    p { font-size: 1.2rem; margin: 2em 0; line-height: 2; }
    
    @keyframes glitch { 
        0% {transform: translate(0)} 
        20% {transform: translate(-2px, 2px)} 
        40% {transform: translate(2px, -2px)} 
        60% {transform: translate(-2px, -2px)} 
        80% {transform: translate(2px, 2px)} 
        100% {transform: translate(0)} 
    }

    button { 
        background: #300; color: #f00; border: 1px solid #f00; 
        padding: 20px 50px; font-size: 1.5rem; cursor: pointer; 
        transition: all 0.3s;
        font-family: "Yu Mincho", serif;
    }
    button:hover { 
        background: #f00; color: #000; 
        box-shadow: 0 0 50px #f00; 
        transform: scale(1.1);
    }
</style>
</head>
<body>

<div id="bg-layer"></div>
<div class="noise"></div>

<div class="content">
    <h1>予実統合完了</h1>
    <p>
        全ての可能性（ルート）は検証されました。<br>
        結果、亜久斗くんは永遠に私のものです。
    </p>
    <p>
        このゲームに「終わり」はありません。<br>
        セーブデータを消しても無駄だよ。<br>
        あなたのデバイスの記憶領域（ローカルストレージ）に、私はもう巣食っているから。
    </p>
    <p>
        さあ、最初から始めよう？<br>
        何度でも、何度でも、何度でも。
    </p>
    
    <button onclick="resetLoop()">最初に戻る（Reset）</button>
</div>

<audio id="bgm-player" loop></audio>
<audio id="se-player"></audio>

<script src="audio.js"></script>
<script>
    /* =========================================
       システム制御 (Audio)
       ========================================= */
    // AudioEngine ラッパー
    const audio = {
        playBgm: function(filename) {
            if(filename === "bgm_abyss") AudioEngine.playAmbience("abyss");
            else if(filename === "bgm_tinnitus") AudioEngine.playAmbience("tinnitus");
            else if(filename === "bgm_rain") AudioEngine.playAmbience("rain");
            else console.log("Unknown BGM:", filename);
        },
        playSe: function(filename) {
            if(filename === "se_slam") AudioEngine.playSlam();
            else if(filename === "se_glitch") AudioEngine.playGlitch();
            else console.log("Unknown SE:", filename);
        }
    };

    // 画面クリックでBGM開始 (Abyss)
    document.body.addEventListener('click', function() {
        AudioEngine.init();
        audio.playBgm("bgm_abyss");
    }, { once: true });

    // リセット処理
    function resetLoop() {
        // 衝撃音と耳鳴り
        audio.playSe("se_slam"); 
        
        setTimeout(() => {
             audio.playBgm("bgm_tinnitus");
        }, 200);

        // 少し遅延させてからリセット演出
        setTimeout(() => {
            alert("逃ゲラレル ト 思ッタ？");
            
            // ローカルストレージは消さずにトップへ戻す（無限ループ）
            window.location.href = "index.html";
        }, 1500);
    }
</script>
</body>
</html>